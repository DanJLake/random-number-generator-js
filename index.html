<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>EzNumber</title>

    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <img src="./img/james-no-cap.png" alt="Logo">
        <ul>
            <li><a href="./index.html">Number Generator</a></li>
             <li><a href="./cookies.html">Cookies</a></li>
        </ul>
    </header>
    <main>
        <h1>Random Number Generator</h1>
        <form action="">
            <label for="number-range-check">
                <input type="checkbox" name="number-range-check" id="number-range-selector" onchange="numRange();">
                Number Range
            </label>
            <fieldset id="number-range-options" disabled="disabled">
                <label for="number-range-lowest">
                    Between
                    <input type="number" name="number-range-lowest" id="number-range-lowest-input">
                </label>
                <label for="number-range-highest">
                    and
                    <input type="number" name="number-range-highest" id="number-range-highest-input">
                </label>
                <p id="number-range-error-display"></p>
            </fieldset>
            <label for="allow-decimals-check" id="decimals-label">
                <input type="checkbox" name="allow-decimals-check" id="allow-decimals-selector" onchange="decimalAllowed();">
                Allow Decimals
            </label>
            <fieldset id="allow-decimals-options" disabled="disabled">
                <label for="decimal-places-selector">
                    <input type="number" name="decimal-places-selector" id="decimal-places-input">
                    Decimal Places
                </label>
                <p id="decimal-places-error-display"></p>
            </fieldset>
            <input type="button" value="Generate" onclick="generateNumber();">
        </form>

            <h2 id="number-store">Click 'Generate' to get started.</h2>
    </main>

    <script>
        function numRange() {
            if (document.getElementById('number-range-selector').checked === true){
                document.getElementById('number-range-options').disabled = false;
            }
            else{
                document.getElementById('number-range-options').disabled = true;
            }
        }

        function decimalAllowed() {
            if (document.getElementById('allow-decimals-selector').checked === true){
                document.getElementById('allow-decimals-options').disabled = false;
            }
            else{
                document.getElementById('allow-decimals-options').disabled = true;
            }
        }

        function generateNumber(){
            const numStore = document.getElementById('number-store');
            let errorCount = 0;

            let max = 9999999999999;
            let min = 0;

            let decimalPlaces = 0;

            document.getElementById('number-range-error-display').innerHTML = '';
            document.getElementById('decimal-places-error-display').innerHTML = '';

            if (document.getElementById('number-range-selector').checked === true){

            }
            else{

            }

            //Check if Number Range is enabled
            if (document.getElementById('number-range-selector').checked === true){

                //Check value is present in low number range field
                if (document.getElementById('number-range-lowest-input').value.length !== 0  && Number.isNaN(document.getElementById('number-range-lowest-input').value) == false){
                    min = document.getElementById('number-range-lowest-input').valueAsNumber;
                }
                else{
                    errorCount++;
                    document.getElementById('number-range-error-display').innerHTML += 'Invalid value entered for the lower range number!<br>';
                }
                //Check value is present in high number range field
                if (document.getElementById('number-range-highest-input').value.length !== 0 && Number.isNaN(document.getElementById('number-range-highest-input').value) == false){
                    max = document.getElementById('number-range-highest-input').valueAsNumber;
                }
                else{
                    errorCount++;
                    document.getElementById('number-range-error-display').innerHTML += 'Invalid value entered for the higher range number!<br>';
                }
            }

            if(document.getElementById('allow-decimals-selector').checked === true){
                if(document.getElementById('decimal-places-input').value.length !== 0 && Number.isNaN(document.getElementById('decimal-places-input').value) == false){
                    decimalPlaces = document.getElementById('decimal-places-input').valueAsNumber;
                }
                else{
                    errorCount++;
                    document.getElementById('decimal-places-error-display').innerHTML += 'Invalid value entered for number of decimal places!<br>';
                }
            }

            if (errorCount === 0){
                if (document.getElementById('allow-decimals-selector').checked === false) {
                    let randomNumber = Math.floor(Math.random() * ((max - min)) + min);
                    document.getElementById('number-store').innerHTML = randomNumber;
                }
                else{
                    let randomNumber = Math.random() * ((max - min) + 1) + min;
                    trimmedNumber = parseFloat(randomNumber).toFixed(decimalPlaces);
                    document.getElementById('number-store').innerHTML = trimmedNumber;
                }
            }
        }
    </script>
</body>
</html>